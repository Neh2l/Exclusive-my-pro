import{c as v,u as f,r as o,P as y,j as e,L as m,a as L,y as h}from"./index-D-Wes012.js";const w="https://backend-gules-six-47.vercel.app/api",S=async({email:i,password:l})=>{try{const s=await v.post(`${w}/users/login`,{email:i,password:l});if(s.data?.data?.token&&s.data?.data?.role){const{token:r,role:t}=s.data.data;return localStorage.setItem("token",r),localStorage.setItem("role",t),{token:r,role:t}}else throw new Error("Invalid response from server")}catch(s){throw console.error("Login API Error:",s.response?.data||s.message),s.response?.data||{message:"Login failed"}}},k="/Exclusive-my-pro/assets/loginimage-BtDu8bPr.jpg",I=()=>{const i=f(),{setToken:l}=o.useContext(y),[s,r]=o.useState(""),[t,x]=o.useState(""),[c,d]=o.useState(!1),[g,u]=o.useState(""),j=async a=>{a.preventDefault(),d(!0),u("");try{const{token:n,role:p}=await S({email:s,password:t});l(n),localStorage.setItem("token",n),localStorage.setItem("role",p),h.success("Successfully logged in!",{position:"top-right",autoClose:2e3}),setTimeout(()=>{i(p==="ADMIN"?"/admin":"/account")},2e3)}catch(n){u(n.message||"Login failed"),h.error("Login failed! Please check your credentials.",{position:"top-right",autoClose:3e3})}finally{d(!1)}};return e.jsx("div",{children:e.jsxs("div",{className:"login-wrapper",children:[e.jsx("div",{className:"login-left",children:e.jsx("img",{src:k,alt:"Login"})}),e.jsx("div",{className:"login-right",children:e.jsxs("div",{className:"login-card",children:[e.jsx("h2",{children:"Welcome Back"}),e.jsx("p",{children:"Log in to continue your journey"}),e.jsxs("form",{onSubmit:j,children:[e.jsx("input",{type:"email",placeholder:"Email",value:s,onChange:a=>r(a.target.value),required:!0}),e.jsx("input",{type:"password",placeholder:"Password",value:t,onChange:a=>x(a.target.value),required:!0}),g&&e.jsx("p",{className:"error-text",children:g}),e.jsxs("div",{className:"login-actions",children:[e.jsx("button",{type:"submit",disabled:c,children:c?"Logging in...":"Log In"}),e.jsx(m,{to:"/forgot-password",className:"link-text",children:"Forgot Password?"})]})]}),e.jsxs("p",{className:"switch-text",children:["Donâ€™t have an account? ",e.jsx(m,{to:"/signup",className:"link-text",children:"Sign Up"})]})]})}),e.jsx(L,{})]})})};export{I as default};
