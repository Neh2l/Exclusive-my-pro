import{c as v,u as f,r,P as w,j as e,L as p,a as y,y as h}from"./index-BK53n6on.js";const L="https://backend-gules-six-47.vercel.app/api",N=async({email:n,password:l})=>{try{const s=await v.post(`${L}/users/login`,{email:n,password:l});if(s.data?.data?.token&&s.data?.data?.role){const{token:a,role:i}=s.data.data;return localStorage.setItem("token",a),localStorage.setItem("role",i),{token:a,role:i}}else throw new Error("Invalid response from server")}catch(s){throw console.error("Login API Error:",s.response?.data||s.message),s.response?.data||{message:"Login failed"}}},S="/Exclusive-my-pro/assets/loginimage-BtDu8bPr.jpg",b=()=>{const n=f(),[l,s]=r.useState(""),[a,i]=r.useState(""),[c,d]=r.useState(!1),[g,m]=r.useState(""),{setToken:x}=r.useContext(w),j=async t=>{t.preventDefault(),d(!0),m("");try{const{token:o,role:u}=await N({email:l,password:a});x(o),localStorage.setItem("token",o),localStorage.setItem("role",u),h.success("Successfully logged in!",{position:"top-right",autoClose:2e3}),setTimeout(()=>{n(u==="ADMIN"?"/admin":"/account")},2e3)}catch(o){console.error(o),m(o.message||"Login failed"),h.error("Login failed! Please check your credentials.",{position:"top-right",autoClose:3e3})}finally{d(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pageHeading d-flex w-25 pt-5",children:[e.jsx(p,{to:"/",className:" me-1",children:"Home"}),e.jsx("span",{className:"active ",children:location.pathname})]}),e.jsxs("div",{className:"login",children:[e.jsx("div",{className:"login-img",children:e.jsx("img",{src:S,alt:"loginimg"})}),e.jsxs("div",{className:"login-container",children:[e.jsx("p",{children:"Log in to Exclusive"}),e.jsx("p",{children:"Enter your details below"}),e.jsxs("form",{onSubmit:j,children:[e.jsx("input",{type:"email",required:!0,placeholder:"Email or Phone Number",value:l,onChange:t=>s(t.target.value)}),e.jsx("input",{type:"password",required:!0,placeholder:"Password",value:a,onChange:t=>i(t.target.value)}),e.jsxs("div",{className:"login-actions",children:[e.jsx("button",{type:"submit",className:"login-btn",disabled:c,children:c?"Logging in...":"Log In"}),e.jsx(p,{to:"/forgot-password",className:"forgot-link",children:"Forgot Password?"})]}),g&&e.jsx("p",{className:"error-message",children:g})]})]}),e.jsx(y,{})]})]})};export{b as default};
